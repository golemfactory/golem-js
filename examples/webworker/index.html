<!doctype html>
<html>
  <body>
    <p>(Native) Count numbers: <output id="result"></output></p>
    <p>(Golem) Count numbers: <output id="result_golem"></output></p>
    <button onclick="startWorker()">Start Worker</button>
    <button onclick="stopWorker()">Stop Worker</button>
    <button onclick="startGolemWorker()">Start Golem Worker</button>
    <button onclick="stopGolemWorker()">Stop Golem Worker</button>

    <script type="module">
      import { GolemWorker } from "../../dist/golem-js.min.js";
      let worker, golemWorker;
      window.startWorker = function startWorker() {
        if (typeof Worker !== "undefined") {
          if (typeof worker == "undefined") {
            worker = new Worker("worker.js");
          }
          worker.onmessage = function (event) {
            document.getElementById("result").innerHTML = event.data;
          };
        } else {
          document.getElementById("result").innerHTML = "Sorry! No Web Worker support.";
        }
      };
      window.stopWorker = function stopWorker() {
        worker.terminate();
        worker = undefined;
      };

      window.startGolemWorker = function startGolemWorker() {
        console.log();
        if (typeof GolemWorker.default.GolemWorker !== "undefined") {
          if (typeof golemWorker == "undefined") {
            golemWorker = new GolemWorker.default.GolemWorker("worker.js", {
              yagnaOptions: { apiKey: "64ed8ebb2f5749e683f1f0c6518169da" },
            });
          }
          golemWorker.onmessage = function (event) {
            document.getElementById("result_golem").innerHTML = event.data;
          };
        } else {
          document.getElementById("result_golem").innerHTML = "Sorry! No Web Worker support.";
        }
      };

      window.stopGolemWorker = function stopGolemWorker() {
        golemWorker.terminate();
        golemWorker = undefined;
      };
    </script>
  </body>
</html>
